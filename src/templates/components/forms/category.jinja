{% from "components/icons.jinja" import identification, lock, paint_brush %}
{% from "components/forms/form.jinja" import form_field %}


{% macro add_category_form(form) %}
     <div class="w-full max-w-screen-sm">
        <form action="{{ url_for("categories.create") }}" method="post">
            <div class="flex flex-col w-full gap-5">
                <div class="flex flex-col gap-3 w-full">
                    {{ form_field(form.name, identification, "Category Name") }}
                    <script src="/static/js/lib/coloris.min.js"></script>
                    <link rel="stylesheet" href="/static/styles/lib/coloris.min.css">
                    <div class="flex flex-col w-full md:gap-1">
                        <label for="color" class="text-slate-500 dark:text-slate-400 text-sm font-extralight">Color</label>
                        <div class="flex py-1.5 px-1 gap-2 items-center border-b border-b-slate-400 dark:border-b-slate-500 select-color-button">
                            {{ paint_brush(class="text-slate-500 dark:text-slate-300 h-5 font-extralight md:h-7") }}
                            <input id="color" name="color" type="text" data-coloris class="bg-transparent w-[200px] cursor-pointer" value="{{ request.form[form.color.name] }}">
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full rounded-lg bg-gradient-to-r from-indigo-800 to-indigo-500 py-1.5 text-sm font-extralight text-slate-100 transition-all duration-300 ease-in-out">Create Category</button>
            </div>
        </form>
    </div>
    <style>
        .select-color-button .clr-field {
            border-radius: 5px;
            overflow: hidden;
        }

        .select-color-button .clr-field button {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
    <script type="module">
        const selectColorButton = document.querySelector(".select-color-button");

        selectColorButton.addEventListener('click', (e) => {
            Coloris({
                themeMode: document.documentElement.classList.contains('dark') ? 'dark' : 'light',
                alpha: false,
                swatches: [
                    "#ef4444",
                    "#f97316",
                    "#f59e0b",
                    "#eab308",
                    "#84cc16",
                    "#22c55e",
                    "#10b981",
                    "#14b8a6",
                    "#06b6d4",
                    "#0ea5e9",
                    "#6366f1",
                    "#8b5cf6",
                    "#a855f7",
                    "#d946ef",
                    "#ec4899",
                    "#f43f5e"
                ],
                margin: 5
            });
        })
    </script>
{% endmacro %}


{% macro edit_category_form(category, form) %}
     <div class="w-full max-w-screen-sm">
        <form action="{{ url_for("categories.edit", category_uuid=category.uuid) }}" method="post">
            <div class="flex flex-col w-full gap-5">
                <div class="flex flex-col gap-3 w-full">
                    {{ form_field(form.name, identification, "Category Name", category.name) }}
                    <script src="/static/js/lib/coloris.min.js"></script>
                    <link rel="stylesheet" href="/static/styles/lib/coloris.min.css">
                    <div class="flex flex-col w-full md:gap-1">
                        <label for="color" class="text-slate-500 dark:text-slate-400 text-sm font-extralight">Color</label>
                        <div class="flex py-1.5 px-1 gap-2 items-center border-b border-b-slate-400 dark:border-b-slate-500 select-color-button">
                            {{ paint_brush(class="text-slate-500 dark:text-slate-300 h-5 font-extralight md:h-7") }}
                            <input id="color" name="color" type="text" data-coloris class="bg-transparent w-[200px] cursor-pointer" value="{{ category.color }}">
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full rounded-lg bg-gradient-to-r from-indigo-800 to-indigo-500 py-1.5 text-sm font-extralight text-slate-100 transition-all duration-300 ease-in-out">Save Changes</button>
            </div>
        </form>
    </div>
    <style>
        .select-color-button .clr-field {
            border-radius: 5px;
            overflow: hidden;
        }

        .select-color-button .clr-field button {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
    <script type="module">
        const selectColorButton = document.querySelector(".select-color-button");

        selectColorButton.addEventListener('click', (e) => {
            Coloris({
                themeMode: document.documentElement.classList.contains('dark') ? 'dark' : 'light',
                alpha: false,
                swatches: [
                    "#ef4444",
                    "#f97316",
                    "#f59e0b",
                    "#eab308",
                    "#84cc16",
                    "#22c55e",
                    "#10b981",
                    "#14b8a6",
                    "#06b6d4",
                    "#0ea5e9",
                    "#6366f1",
                    "#8b5cf6",
                    "#a855f7",
                    "#d946ef",
                    "#ec4899",
                    "#f43f5e"
                ],
                margin: 5
            });
        })
    </script>
{% endmacro %}
